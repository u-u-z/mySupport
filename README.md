# 普通的工單系統

> 試試 Routing-Controller | 順便刷一下Git的存在感 >w<



## 系統設計

### 界面/基礎功能

* 用戶登錄 / 自動登錄 login
* 首頁（去找知識庫，還是提工單）
* 工單列表（普通用戶和管理員有不同的的顯示）
* 創建工單（僅用戶有權限）
* 查看工單
* 回復工單信息
* 關閉工單

### 其他功能

* 支持消息推送（可用於綁webhook）
* ...



## 數據表（大概）

### 用戶 users

| 字段名   | 數據結構     | 用途                             |
| -------- | ------------ | -------------------------------- |
| id       | INT(16)      | 用戶id                           |
| username | VARCHAR(256) | 用戶名（英文）                   |
| password | VARCHAR(256) | 密碼HASH                         |
| email    | VARCHAR(256) | 郵箱賬號（獲取頭像）             |
| type     | INT(2)       | 用戶類型：0-普通用戶 \| 1-管理員 |

### 工單列表 tickets

| 字段名  | 數據結構      | 用途                                  |
| ------- | ------------- | ------------------------------------- |
| id      | INT(16)       | 工單id                                |
| uuid    | VARCHAR(256)  | 工單唯一識別符（用於URL）             |
| title   | VARCHAR(1024) | 工單標題                              |
| status  | INT(2)        | 工單狀態 0-等待回復 1-已回復 2-已關閉 |
| user_id | INT(16)       | 用戶id                                |
| type    | INT(16)       | 工單類型 如：1- 關於付款              |
| time    | VARCHAR(256)  | 工單提交時間戳                        |

### 消息列表 messages

| 字段名    | 數據結構      | 用途                      |
| --------- | ------------- | ------------------------- |
| id        | INT(16)       | 消息id                    |
| ticket_id | INT(16)       | 工單id                    |
| user_id   | INT(16)       | 用戶id                    |
| content   | VARCHAR(2048) | 工單消息內容              |
| type      | INT(2)        | 消息屬性 0-文字 1-圖片url |
| time      | VARCHAR(256)  | 消息提交時間戳            |

### 用戶身份令牌 tokens

| 字段名     | 數據結構     | 用途         |
| ---------- | ------------ | ------------ |
| id         | INT(16)      | 令牌id       |
| user_id    | INT(16)      | 用戶id       |
| token      | VARCHAR(256) | 令牌內容     |
| time_start | VARCHAR(256) | 令牌創建時間 |
| time_stop  | VARCHAR(256) | 令牌到期時間 |





